<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Verification Complete - Tech Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      body {
        font-family: Arial, sans-serif;
        background: #f7f7f7;
        margin: 0;
        padding: 0;
      }
      .container {
        max-width: 1200px;
        margin: 24px auto;
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 2px 24px #dedede;
        padding: 24px 24px 24px 24px;
      }
      h1 {
        text-align: center;
        color: #1a237e;
      }
      #status {
        font-size: 22px;
        margin-bottom: 20px;
        text-align: center;
      }
      .spinner {
        border: 4px solid #f3f3f3;
        border-top: 4px solid #4caf50;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin: 0 auto;
      }
      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
      .ad-block,
      .ad-banner {
        background: #e3e3e3;
        border-radius: 7px;
        margin: 20px auto;
        text-align: center;
        color: #606060;
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 120px;
        font-size: 26px;
        width: 100%;
      }
      .ad-banner {
        min-height: 300px;
        font-size: 34px;
      }
      .ad-vertical {
        min-width: 160px;
        min-height: 600px;
        max-width: 300px;
        background: #eaeaea;
        margin: 0 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        border-radius: 7px;
      }
      .main-content {
        display: flex;
        flex-direction: row;
      }
      .side-ads {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }
      .blog-section {
        flex: 1;
        margin-top: 0;
        margin-bottom: 0;
        padding: 0 12px;
      }
      .blog-title {
        font-size: 28px;
        color: #2b3a67;
        margin: 18px 0 18px 0;
      }
      .blog-list {
        display: flex;
        flex-wrap: wrap;
        gap: 24px;
        justify-content: space-between;
      }
      .blog-card {
        background: #f1f5fb;
        border-radius: 8px;
        box-shadow: 0 1px 8px #e0e0e0;
        width: 32%;
        min-width: 290px;
        max-width: 400px;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        margin-bottom: 8px;
        transition: box-shadow 0.2s;
      }
      .blog-card:hover {
        box-shadow: 0 4px 16px #cfd8dc;
      }
      .blog-img {
        width: 100%;
        height: 160px;
        object-fit: cover;
        background: #e2e2e2;
      }
      .blog-content {
        padding: 14px 15px 10px 15px;
        flex: 1;
        display: flex;
        flex-direction: column;
        min-width: 0;
      }
      .blog-headline {
        font-size: 19px;
        font-weight: bold;
        color: #172b4d;
        margin-bottom: 7px;
        text-decoration: none;
        line-height: 1.25em;
        display: block;
        word-break: break-word;
      }
      .blog-desc {
        font-size: 15px;
        color: #333;
        margin-bottom: 5px;
      }
      .blog-author {
        font-size: 13px;
        color: #6b7c93;
        margin-top: auto;
        margin-bottom: 3px;
      }
      #timerText {
        text-align: center;
        font-size: 22px;
        color: #333;
        margin-bottom: 8px;
      }
      #swipeMsgTop {
        display: none;
        text-align: center;
        font-size: 20px;
        margin: 18px auto 0 auto;
        color: #1a237e;
        font-weight: 600;
      }
      #nextBox {
        display: none;
        width: 100%;
        padding-top: 30px;
        text-align: center;
        position: sticky;
        bottom: 0;
        background: linear-gradient(to top, #f7f7f7 90%, transparent);
      }
      #nextBtn {
        margin: 16px auto 0;
        padding: 18px 44px;
        font-size: 26px;
        background-color: #4caf50;
        color: white;
        border: none;
        border-radius: 7px;
        cursor: pointer;
        display: inline-block;
      }
      @media (max-width: 1200px) {
        .main-content {
          flex-direction: column;
        }
        .side-ads {
          flex-direction: row;
          justify-content: center;
        }
      }
      @media (max-width: 900px) {
        .blog-list {
          flex-direction: column;
          align-items: center;
        }
        .blog-card {
          width: 98vw;
          max-width: 98vw;
          min-width: 0;
        }
        .ad-banner {
          font-size: 24px;
        }
      }
      @media (max-width: 600px) {
        .container {
          padding: 4px;
        }
        .blog-card {
          width: 98vw;
          max-width: 98vw;
          min-width: 0;
        }
        .ad-block,
        .ad-banner,
        .ad-vertical {
          font-size: 16px;
          min-height: 60px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="ad-banner">Top Banner Ad (Google AdSense)</div>
      <h1 id="status">🔄 Verifying...</h1>
      <div class="spinner" id="spinner"></div>
      <div class="ad-block">Ad Block (Google AdSense)</div>
      <p id="timerText" style="text-align: center">
        Please wait 15 seconds before you can go back to Telegram.
      </p>
      <div id="swipeMsgTop">Swipe below to return to Telegram 👇</div>
      <div class="main-content">
        <div class="side-ads">
          <div class="ad-vertical">Left Vertical Ad</div>
          <div class="ad-vertical">Left Vertical Ad</div>
        </div>
        <div class="blog-section">
          <div class="blog-title">Latest Tech Blog Posts</div>
          <div class="blog-list">
            <div class="blog-card">
              <img class="blog-img" src="https://images.unsplash.com/photo-1487017159836-4e23ece2e4cf?auto=format&fit=crop&w=400&q=80" alt="Blockchain">
              <div class="blog-content">
                <a href="#" class="blog-headline">Understanding Blockchain Technology</a>
                <div class="blog-desc">Go beyond the hype and learn how blockchain is set to transform industries from finance to healthcare.</div>
                <div class="blog-author">By Crypto Analyst</div>
              </div>
            </div>
            <div class="blog-card">
              <img class="blog-img" src="https://images.unsplash.com/photo-1465101178521-c1a9136a03b8?auto=format&fit=crop&w=400&q=80" alt="Green Tech">
              <div class="blog-content">
                <a href="#" class="blog-headline">Green Tech: Innovations for a Sustainable Future</a>
                <div class="blog-desc">Explore the latest breakthroughs in clean energy, sustainable gadgets, and eco-friendly tech trends.</div>
                <div class="blog-author">By EcoTech Writer</div>
              </div>
            </div>
            <div class="blog-card">
              <img class="blog-img" src="https://images.unsplash.com/photo-1470770841072-f978cf4d019e?auto=format&fit=crop&w=400&q=80" alt="Startup Guide">
              <div class="blog-content">
                <a href="#" class="blog-headline">Startup Guide: Turning Your Idea Into Reality</a>
                <div class="blog-desc">From brainstorming to funding, get practical tips for launching your own tech startup in 2025.</div>
                <div class="blog-author">By Startup Mentor</div>
              </div>
            </div>
            <div class="blog-card">
              <img class="blog-img" src="https://images.unsplash.com/photo-1451187580459-43490279c0fa?auto=format&fit=crop&w=400&q=80" alt="Data Privacy">
              <div class="blog-content">
                <a href="#" class="blog-headline">Data Privacy Laws: What You Need to Know</a>
                <div class="blog-desc">An overview of global data privacy regulations and what they mean for individuals and businesses.</div>
                <div class="blog-author">By Privacy Advocate</div>
              </div>
            </div>
            <div class="blog-card">
              <img class="blog-img" src="https://images.unsplash.com/photo-1482062364825-616fd23b8fc1?auto=format&fit=crop&w=400&q=80" alt="IoT">
              <div class="blog-content">
                <a href="#" class="blog-headline">The Future of IoT: Smart Everything</a>
                <div class="blog-desc">How the Internet of Things is connecting our world and what’s next for smart devices.</div>
                <div class="blog-author">By IoT Insider</div>
              </div>
            </div>
            <div class="blog-card">
              <img class="blog-img" src="https://images.unsplash.com/photo-1461749280684-dccba630e2f6?auto=format&fit=crop&w=400&q=80" alt="Edge Computing">
              <div class="blog-content">
                <a href="#" class="blog-headline">Edge Computing: The Next Big Thing?</a>
                <div class="blog-desc">Why edge computing matters for latency, privacy, and the future of real-time apps.</div>
                <div class="blog-author">By Edge Expert</div>
              </div>
            </div>
            <div class="blog-card">
              <img class="blog-img" src="https://images.unsplash.com/photo-1519125323398-675f0ddb6308?auto=format&fit=crop&w=400&q=80" alt="Open Source">
              <div class="blog-content">
                <a href="#" class="blog-headline">Open Source: Changing the Software World</a>
                <div class="blog-desc">Explore the power of open source, from Linux to the latest developer tools and frameworks.</div>
                <div class="blog-author">By OSS Fan</div>
              </div>
            </div>
            <div class="blog-card">
              <img class="blog-img" src="https://images.unsplash.com/photo-1515378791036-0648a3ef77b2?auto=format&fit=crop&w=400&q=80" alt="Women in Tech">
              <div class="blog-content">
                <a href="#" class="blog-headline">Women in Tech: Stories and Inspiration</a>
                <div class="blog-desc">Celebrating women who are making a difference in technology and inspiring the next generation.</div>
                <div class="blog-author">By Tech Inclusion</div>
              </div>
            </div>
          </div>
          <div class="ad-block">Ad Block (Google AdSense)</div>
        </div>
        <div class="side-ads">
          <div class="ad-vertical">Right Vertical Ad</div>
          <div class="ad-vertical">Right Vertical Ad</div>
        </div>
      </div>
      <div class="ad-banner">Bottom Banner Ad (Google AdSense)</div>
      <div id="nextBox">
        <button id="nextBtn" style="display: none">Go to Telegram ➡️</button>
      </div>
    </div>
    <script>
      let userId = null;
      let verificationPassed = false;
      let timerPassed = false;
      let nextBtnVisible = false;
      function tryRedirect() {
        if (verificationPassed && timerPassed && nextBtnVisible) {
          window.location.href = "https://t.me/juice_01_bot?start=verified";
        }
      }
      function showNextBox() {
        document.getElementById("nextBox").style.display = "block";
        document.getElementById("swipeMsgTop").style.display = "block";
        document.getElementById("timerText").innerText =
          "✅ Verification step finished!";
        timerPassed = true;
      }
      function startCountdown() {
        let seconds = 15;
        const countdown = setInterval(() => {
          if (seconds > 0) {
            document.getElementById(
              "timerText"
            ).innerText = `Please wait ${seconds} seconds before you can go back to Telegram.`;
            seconds--;
          } else {
            clearInterval(countdown);
            showNextBox();
          }
        }, 1000);
      }
      async function verifyUser() {
        const urlParams = new URLSearchParams(window.location.search);
        userId = urlParams.get("userId");
        if (!userId) userId = sessionStorage.getItem("userId");
        if (!userId) {
          document.getElementById("status").innerText = "❌ Missing user ID.";
          document.getElementById("spinner").style.display = "none";
          verificationPassed = true;
          return;
        }
        try {
          const response = await fetch(
            "http://localhost:3000/api/verify-user",
            {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({ userId }),
            }
          );
          if (response.ok) {
            document.getElementById("status").innerText = "✅ Token Verified!";
            verificationPassed = true;
          } else {
            document.getElementById("status").innerText =
              "❌ Verification failed.";
            document.getElementById("spinner").style.display = "none";
          }
        } catch (err) {
          document.getElementById("status").innerText =
            "❌ Server error. Please try again.";
          document.getElementById("spinner").style.display = "none";
        }
      }
      window.addEventListener("scroll", function () {
        if (!(timerPassed && verificationPassed) || nextBtnVisible) return;
        let nextBox = document.getElementById("nextBox");
        let rect = nextBox.getBoundingClientRect();
        if (
          window.innerHeight + window.scrollY >=
            document.body.offsetHeight - 80 ||
          (rect.top < window.innerHeight && rect.bottom > 0)
        ) {
          document.getElementById("nextBtn").style.display = "inline-block";
          nextBtnVisible = true;
        }
      });
      window.onload = () => {
        startCountdown();
        verifyUser();
        document.getElementById("nextBtn").onclick = () => {
          tryRedirect();
        };
      };
      document.addEventListener("DOMContentLoaded", function () {
        document.getElementById("nextBox").style.display = "none";
        document.getElementById("swipeMsgTop").style.display = "none";
      });
    </script>
  </body>
</html>